{"ast":null,"code":"import _toConsumableArray from\"/home/dzzz/javaskripta/odin/git/gotovi_projecti/odin_shopping_cart/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _createForOfIteratorHelper from\"/home/dzzz/javaskripta/odin/git/gotovi_projecti/odin_shopping_cart/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _slicedToArray from\"/home/dzzz/javaskripta/odin/git/gotovi_projecti/odin_shopping_cart/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from'react';import{RouteSwitch}from\"../pages/RouteSwitch\";import{CartView}from\"./cart/CartView\";import{items}from'./store/items';import'../styles/main.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var tmpCart=[];function Main(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),cart=_useState2[0],setCart=_useState2[1];var _useState3=useState(items),_useState4=_slicedToArray(_useState3,2),fitems=_useState4[0],setFitems=_useState4[1];var _useState5=useState({display:'none'}),_useState6=_slicedToArray(_useState5,2),cartStyle=_useState6[0],setCartStyle=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),cartV=_useState8[0],setCartV=_useState8[1];//filterTypes\nvar typeSet=new Set();var types=['all items'];var _iterator=_createForOfIteratorHelper(items),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var item=_step.value;typeSet.add(item.type);}}catch(err){_iterator.e(err);}finally{_iterator.f();}var _iterator2=_createForOfIteratorHelper(typeSet),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var x=_step2.value;types.push(x);}//////////////\n}catch(err){_iterator2.e(err);}finally{_iterator2.f();}function addItemToCart(id){items.map(function(newItem){if(newItem.id===id){if(!itemInCart(newItem)){tmpCart.push(newItem);setCart(tmpCart);setPrice(price+=parseFloat(newItem.price));//has to because adds 2 on first click instead of 1 ???\nsetPrice(price-=parseFloat(newItem.price));}newItem.cartCount++;setPrice(price+=parseFloat(newItem.price));}return'';});setCart([].concat(tmpCart));}function itemInCart(item){var _iterator3=_createForOfIteratorHelper(tmpCart),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var x=_step3.value;if(x===item)return true;}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}return false;}function filterItems(type){types.map(function(newType){if(newType==='all items')setFitems(items);else{if(newType===type){if(newType===type){console.log(type);var newItems=items.filter(function(newItem){return newItem.type===type;});setFitems(newItems);}}}return'none';});}//total priceCart\nvar _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),price=_useState10[0],setPrice=_useState10[1];function handleAdd(id){cart.map(function(newItem){if(id===newItem.id){newItem.cartCount++;setPrice(price+=parseFloat(newItem.price));}console.log(newItem.price);return newItem;});setCart(_toConsumableArray(cart));}////////////////\n//\"hardCoding\" handleRemove\nvar cartSet=new Set();var _iterator4=_createForOfIteratorHelper(cart),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var _x=_step4.value;cartSet.add(_x);}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}function handleRemove(id){cart.map(function(newItem){if(id===newItem.id){if(newItem.cartCount===1){var _iterator5=_createForOfIteratorHelper(cartSet),_step5;try{for(_iterator5.s();!(_step5=_iterator5.n()).done;){var x=_step5.value;if(x.id===id)cartSet.delete(x);}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}newItem.cartCount--;setPrice(price-=parseFloat(newItem.price));//\"breaking point\"\nvar tmpArray=Array.from(cartSet);setCart(tmpArray);}else{newItem.cartCount--;setPrice(price-=parseFloat(newItem.price));}}return'';});}///////////////////////////\nfunction handleShowCart(){setCartV(!cartV);}useEffect(function(){return function handleShowCart(){if(cartV){setCartStyle({display:'none'});}else setCartStyle({display:'block'});};},[cartV]);return/*#__PURE__*/_jsxs(\"div\",{className:\"main\",children:[/*#__PURE__*/_jsx(RouteSwitch,{items:fitems,addItemToCart:addItemToCart,filterItems:filterItems,types:types,showCart:handleShowCart}),/*#__PURE__*/_jsx(CartView,{cart:cart,price:price,onAdd:handleAdd,onRemove:handleRemove,cartStyle:cartStyle,showCart:handleShowCart})]});}export{Main};","map":{"version":3,"names":["useEffect","useState","RouteSwitch","CartView","items","tmpCart","Main","cart","setCart","fitems","setFitems","display","cartStyle","setCartStyle","cartV","setCartV","typeSet","Set","types","item","add","type","x","push","addItemToCart","id","map","newItem","itemInCart","setPrice","price","parseFloat","cartCount","filterItems","newType","console","log","newItems","filter","handleAdd","cartSet","handleRemove","delete","tmpArray","Array","from","handleShowCart"],"sources":["/home/dzzz/javaskripta/odin/git/gotovi_projecti/odin_shopping_cart/src/components/Main.js"],"sourcesContent":["import { useEffect, useState } from 'react'\nimport { RouteSwitch } from \"../pages/RouteSwitch\";\nimport { CartView } from \"./cart/CartView\";\nimport { items } from './store/items';\n\nimport '../styles/main.css'\n\nconst tmpCart = [];\n\nfunction Main(){\n\n    const [cart, setCart] = useState([]);\n    const [fitems, setFitems] = useState(items);\n    const [cartStyle, setCartStyle] = useState({ display: 'none'});\n    const [cartV, setCartV] = useState(true);\n\n    //filterTypes\n    const typeSet = new Set();\n    const types = ['all items'];\n\n    for(let item of items)\n        typeSet.add(item.type);\n    for(let x of typeSet)\n        types.push(x);\n    //////////////\n    \n    function addItemToCart(id){\n        items.map(function(newItem){\n            if(newItem.id === id){\n                if(!itemInCart(newItem)){\n                    tmpCart.push(newItem);\n                    setCart(tmpCart);\n                    setPrice(price+=parseFloat(newItem.price));\n                    //has to because adds 2 on first click instead of 1 ???\n                    setPrice(price-= parseFloat(newItem.price))\n                }\n                newItem.cartCount++;\n                setPrice(price+=parseFloat(newItem.price));\n            }\n        return ('')})\n\n        setCart([...tmpCart]);\n    }\n    function itemInCart(item){\n        for(let x of tmpCart)\n            if(x === item)\n                return true;\n        return false;\n    }\n    \n    function filterItems(type){\n        types.map(function(newType){\n                if(newType === 'all items')\n                    setFitems(items);\n                else{\n                    if(newType === type){\n                        if(newType === type){\n                            console.log(type);\n                            const newItems = items.filter(function(newItem){\n                                return newItem.type === type;\n                            })\n                            setFitems(newItems);\n                        }\n                    }\n                }       \n        return ('none')})\n    }\n    //total priceCart\n    let [price, setPrice] = useState(0);\n\n    function handleAdd(id){\n        cart.map(function(newItem){\n            if(id === newItem.id){\n                newItem.cartCount++;\n                setPrice(price+=parseFloat(newItem.price))\n            }\n                console.log(newItem.price)\n            return newItem;\n        })\n\n        setCart([...cart])\n    }////////////////\n\n    //\"hardCoding\" handleRemove\n    const cartSet = new Set();\n    for(let x of cart)\n        cartSet.add(x);\n\n    function handleRemove(id){\n        cart.map(function(newItem){\n            if(id === newItem.id){\n                if(newItem.cartCount === 1){\n                    for(let x of cartSet){\n                        if(x.id === id)\n                            cartSet.delete(x);\n                    }\n                    newItem.cartCount--;\n                    setPrice(price-=parseFloat(newItem.price));\n                    //\"breaking point\"\n                    let tmpArray = Array.from(cartSet);\n                    setCart(tmpArray);\n                }\n                else{\n                    newItem.cartCount--;\n                    setPrice(price-=parseFloat(newItem.price))\n                }\n            }\n        return ('')}  )\n    }///////////////////////////\n\n    function handleShowCart(){\n        setCartV(!cartV);\n    }\n\n    useEffect(function(){\n        return (function handleShowCart(){\n            if(cartV){\n                setCartStyle({ display: 'none'});\n\n            }\n            else\n                setCartStyle({ display: 'block'})\n\n        }) \n\n    }, [cartV])\n    \n\n    return (\n        <div className = 'main'>\n            <RouteSwitch  items = {fitems} addItemToCart = {addItemToCart} filterItems = {filterItems} types = {types} showCart = {handleShowCart}></RouteSwitch>\n\n            <CartView cart = {cart} price = {price} onAdd = {handleAdd} onRemove = {handleRemove} cartStyle = {cartStyle} showCart = {handleShowCart}></CartView>\n        </div>\n    )\n}\n\nexport {Main}"],"mappings":"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"},"metadata":{},"sourceType":"module"}